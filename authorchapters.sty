\usepackage{xparse}
\usepackage{titlesec}

% Definieren eines Befehls mit Key-Value-Optionen f√ºr Autor und E-Mail
\ExplSyntaxOn
\NewDocumentCommand{\chapterwithauthor}{ O{} m } {
  \group_begin:
  \keys_set:nn { chapterwithauthor } { #1 }
  \chapter{#2}
  \tl_if_empty:NF \l_chapterwithauthor_author_tl {
    \begin{flushright}
      \textit{von~\l_chapterwithauthor_author_tl}
    \end{flushright}
  }
  \tl_if_empty:NF \l_chapterwithauthor_email_tl {
    \begin{flushright}
      \texttt{E-Mail:~\l_chapterwithauthor_email_tl}
    \end{flushright}
  }
  \group_end:
}

\keys_define:nn { chapterwithauthor }
{
  author .tl_set:N = \l_chapterwithauthor_author_tl,
  email .tl_set:N = \l_chapterwithauthor_email_tl,
}

\NewDocumentCommand{\sectionwithauthor}{ O{} m } {
  \group_begin:
  \keys_set:nn { sectionwithauthor } { #1 }
  \section{#2}
  \tl_if_empty:NF \l_sectionwithauthor_author_tl {
    \begin{flushright}
      \textit{von~\l_sectionwithauthor_author_tl}
    \end{flushright}
  }
  \tl_if_empty:NF \l_sectionwithauthor_email_tl {
    \begin{flushright}
      \texttt{E-Mail:~\l_sectionwithauthor_email_tl}
    \end{flushright}
  }
  \group_end:
}

\NewDocumentCommand{\subsectionwithauthor}{ O{} m } {
  \group_begin:
  \keys_set:nn { subsectionwithauthor } { #1 }
  \subsection{#2}
  \tl_if_empty:NF \l_subsectionwithauthor_author_tl {
    \begin{flushright}
      \textit{von~\l_subsectionwithauthor_author_tl}
    \end{flushright}
  }
  \tl_if_empty:NF \l_subsectionwithauthor_email_tl {
    \begin{flushright}
      \texttt{E-Mail:~\l_subsectionwithauthor_email_tl}
    \end{flushright}
  }
  \group_end:
}

\NewDocumentCommand{\subsubsectionwithauthor}{ O{} m } {
  \group_begin:
  \keys_set:nn { subsubsectionwithauthor } { #1 }
  \subsubsection{#2}
  \tl_if_empty:NF \l_subsubsectionwithauthor_author_tl {
    \begin{flushright}
      \textit{von~\l_subsubsectionwithauthor_author_tl}
    \end{flushright}
  }
  \tl_if_empty:NF \l_subsubsectionwithauthor_email_tl {
    \begin{flushright}
      \texttt{E-Mail:~\l_subsubsectionwithauthor_email_tl}
    \end{flushright}
  }
  \group_end:
}

\keys_define:nn { sectionwithauthor }
{
  author .tl_set:N = \l_sectionwithauthor_author_tl,
  email .tl_set:N = \l_sectionwithauthor_email_tl,
}

\keys_define:nn { subsectionwithauthor }
{
  author .tl_set:N = \l_subsectionwithauthor_author_tl,
  email .tl_set:N = \l_subsectionwithauthor_email_tl,
}

\keys_define:nn { subsubsectionwithauthor }
{
  author .tl_set:N = \l_subsubsectionwithauthor_author_tl,
  email .tl_set:N = \l_subsubsectionwithauthor_email_tl,
}
\ExplSyntaxOff

% Anpassen der Formatierung der Kapitel- und Abschnittstitel
\titleformat{\chapter}
  {\normalfont\huge\bfseries}{\thechapter}{20pt}{}

\titleformat{\section}
  {\normalfont\Large\bfseries}{\thesection}{1em}{}

\titleformat{\subsection}
  {\normalfont\large\bfseries}{\thesubsection}{1em}{}

\titleformat{\subsubsection}
  {\normalfont\normalsize\bfseries}{\thesubsubsection}{1em}{}
